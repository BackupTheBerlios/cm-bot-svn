\section{include/usart\_\-driver.h-\/Dateireferenz}
\label{usart__driver_8h}\index{include/usart\_\-driver.h@{include/usart\_\-driver.h}}


XMEGA USART driver header file.  


{\ttfamily \#include \char`\"{}avr\_\-compiler.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}datatypes.h\char`\"{}}\par
\subsection*{Datenstrukturen}
\begin{DoxyCompactItemize}
\item 
struct {\bf USART\_\-Buffer}
\item 
struct {\bf Usart\_\-and\_\-buffer}
\begin{DoxyCompactList}\small\item\em Struct used when interrupt driven driver is used. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Makrodefinitionen}
\begin{DoxyCompactItemize}
\item 
\#define {\bf USART\_\-RX\_\-BUFFER\_\-SIZE}~128
\item 
\#define {\bf USART\_\-TX\_\-BUFFER\_\-SIZE}~128
\item 
\#define {\bf USART\_\-RX\_\-BUFFER\_\-MASK}~( USART\_\-RX\_\-BUFFER\_\-SIZE -\/ 1 )
\item 
\#define {\bf USART\_\-TX\_\-BUFFER\_\-MASK}~( USART\_\-TX\_\-BUFFER\_\-SIZE -\/ 1 )
\item 
\#define {\bf USART\_\-Format\_\-Set}(\_\-usart, \_\-charSize, \_\-parityMode, \_\-twoStopBits)
\begin{DoxyCompactList}\small\item\em Macro that sets the USART frame format. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-Baudrate\_\-Set}(\_\-usart, \_\-bselValue, \_\-bScaleFactor)
\begin{DoxyCompactList}\small\item\em Set USART baud rate. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-Rx\_\-Enable}(\_\-usart)~((\_\-usart)-\/$>$CTRLB $|$= USART\_\-RXEN\_\-bm)
\begin{DoxyCompactList}\small\item\em Enable USART receiver. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-Rx\_\-Disable}(\_\-usart)~((\_\-usart)-\/$>$CTRLB \&= $\sim$USART\_\-RXEN\_\-bm)
\begin{DoxyCompactList}\small\item\em Disable USART receiver. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-Tx\_\-Enable}(\_\-usart)~((\_\-usart)-\/$>$CTRLB $|$= USART\_\-TXEN\_\-bm)
\begin{DoxyCompactList}\small\item\em Enable USART transmitter. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-Tx\_\-Disable}(\_\-usart)~((\_\-usart)-\/$>$CTRLB \&= $\sim$USART\_\-TXEN\_\-bm)
\begin{DoxyCompactList}\small\item\em Disable USART transmitter. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-RxdInterruptLevel\_\-Set}(\_\-usart, \_\-rxdIntLevel)~((\_\-usart)-\/$>$CTRLA = ((\_\-usart)-\/$>$CTRLA \& $\sim$USART\_\-RXCINTLVL\_\-gm) $|$ \_\-rxdIntLevel)
\begin{DoxyCompactList}\small\item\em Set USART RXD interrupt level. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-TxdInterruptLevel\_\-Set}(\_\-usart, \_\-txdIntLevel)~(\_\-usart)-\/$>$CTRLA = ((\_\-usart)-\/$>$CTRLA \& $\sim$USART\_\-TXCINTLVL\_\-gm) $|$ \_\-txdIntLevel
\begin{DoxyCompactList}\small\item\em Set USART TXD interrupt level. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-DreInterruptLevel\_\-Set}(\_\-usart, \_\-dreIntLevel)~(\_\-usart)-\/$>$CTRLA = ((\_\-usart)-\/$>$CTRLA \& $\sim$USART\_\-DREINTLVL\_\-gm) $|$ \_\-dreIntLevel
\begin{DoxyCompactList}\small\item\em Set USART DRE interrupt level. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-SetMode}(\_\-usart, \_\-usartMode)~((\_\-usart)-\/$>$CTRLC = ((\_\-usart)-\/$>$CTRLC \& ($\sim$USART\_\-CMODE\_\-gm)) $|$ \_\-usartMode)
\begin{DoxyCompactList}\small\item\em Set the mode the USART run in. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-IsTXDataRegisterEmpty}(\_\-usart)~(((\_\-usart)-\/$>$STATUS \& USART\_\-DREIF\_\-bm) != 0)
\begin{DoxyCompactList}\small\item\em Check if data register empty flag is set. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-PutChar}(\_\-usart, \_\-data)~((\_\-usart)-\/$>$DATA = \_\-data)
\begin{DoxyCompactList}\small\item\em Put data (5-\/8 bit character). \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-IsRXComplete}(\_\-usart)~(((\_\-usart)-\/$>$STATUS \& USART\_\-RXCIF\_\-bm) != 0)
\begin{DoxyCompactList}\small\item\em Checks if the RX complete interrupt flag is set. \item\end{DoxyCompactList}\item 
\#define {\bf USART\_\-GetChar}(\_\-usart)~((\_\-usart)-\/$>$DATA)
\begin{DoxyCompactList}\small\item\em Get received data (5-\/8 bit character). \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typdefinitionen}
\begin{DoxyCompactItemize}
\item 
typedef struct {\bf USART\_\-Buffer} {\bf USART\_\-Buffer\_\-t}
\item 
typedef struct {\bf Usart\_\-and\_\-buffer} {\bf USART\_\-data\_\-t}
\begin{DoxyCompactList}\small\item\em Struct used when interrupt driven driver is used. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Funktionen}
\begin{DoxyCompactItemize}
\item 
void {\bf USART\_\-InterruptDriver\_\-Initialize} ({\bf USART\_\-data\_\-t} $\ast$usart\_\-data, USART\_\-t $\ast$usart, USART\_\-DREINTLVL\_\-t dreIntLevel)
\begin{DoxyCompactList}\small\item\em Initializes buffer and selects what USART module to use. \item\end{DoxyCompactList}\item 
void {\bf USART\_\-InterruptDriver\_\-DreInterruptLevel\_\-Set} ({\bf USART\_\-data\_\-t} $\ast$usart\_\-data, USART\_\-DREINTLVL\_\-t dreIntLevel)
\begin{DoxyCompactList}\small\item\em Set USART DRE interrupt level. \item\end{DoxyCompactList}\item 
bool {\bf USART\_\-TXBuffer\_\-FreeSpace} ({\bf USART\_\-data\_\-t} $\ast$usart\_\-data)
\begin{DoxyCompactList}\small\item\em Test if there is data in the transmitter software buffer. \item\end{DoxyCompactList}\item 
bool {\bf USART\_\-TXBuffer\_\-PutByte} ({\bf USART\_\-data\_\-t} $\ast$usart\_\-data, uint8\_\-t data)
\begin{DoxyCompactList}\small\item\em Put data (5-\/8 bit character). \item\end{DoxyCompactList}\item 
bool {\bf USART\_\-RXBufferData\_\-Available} ({\bf USART\_\-data\_\-t} $\ast$usart\_\-data)
\begin{DoxyCompactList}\small\item\em Test if there is data in the receive software buffer. \item\end{DoxyCompactList}\item 
uint8\_\-t {\bf USART\_\-RXBuffer\_\-GetByte} ({\bf USART\_\-data\_\-t} $\ast$usart\_\-data)
\begin{DoxyCompactList}\small\item\em Get received data (5-\/8 bit character). \item\end{DoxyCompactList}\item 
bool {\bf USART\_\-RXComplete} ({\bf USART\_\-data\_\-t} $\ast$usart\_\-data)
\begin{DoxyCompactList}\small\item\em RX Complete Interrupt Service Routine. \item\end{DoxyCompactList}\item 
void {\bf USART\_\-DataRegEmpty} ({\bf USART\_\-data\_\-t} $\ast$usart\_\-data)
\begin{DoxyCompactList}\small\item\em Data Register Empty Interrupt Service Routine. \item\end{DoxyCompactList}\item 
{\bf DT\_\-bool} {\bf USART\_\-RXBuffer\_\-checkPointerDiff} ({\bf DT\_\-byte}, {\bf DT\_\-byte}, {\bf DT\_\-byte})
\begin{DoxyCompactList}\small\item\em Überprüft Differenzen der Empfangs-\/Pointer. \item\end{DoxyCompactList}\item 
void {\bf USART\_\-NineBits\_\-PutChar} (USART\_\-t $\ast$usart, uint16\_\-t data)
\begin{DoxyCompactList}\small\item\em Put data (9 bit character). \item\end{DoxyCompactList}\item 
uint16\_\-t {\bf USART\_\-NineBits\_\-GetChar} (USART\_\-t $\ast$usart)
\begin{DoxyCompactList}\small\item\em Get received data (9 bit character). \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Ausführliche Beschreibung}
XMEGA USART driver header file. This file contains the function prototypes and enumerator definitions for various configuration parameters for the XMEGA USART driver.

The driver is not intended for size and/or speed critical code, since most functions are just a few lines of code, and the function call overhead would decrease code performance. The driver is intended for rapid prototyping and documentation purposes for getting started with the XMEGA ADC module.

For size and/or speed critical code, it is recommended to copy the function contents directly into your application instead of making a function call.

\begin{DoxyParagraph}{Application note:}
AVR1307: Using the XMEGA USART
\end{DoxyParagraph}
\begin{DoxyParagraph}{Documentation}
For comprehensive code documentation, supported compilers, compiler settings and supported devices see readme.html
\end{DoxyParagraph}
\begin{DoxyAuthor}{Autor}
Atmel Corporation: {\tt http://www.atmel.com} \par
 Support email: {\tt avr@atmel.com}
\end{DoxyAuthor}
\begin{DoxyParagraph}{Revision:}
481 
\end{DoxyParagraph}
\begin{DoxyParagraph}{Date:}
2007-\/03-\/06 10:12:53 +0100 (ty, 06 mar 2007) 
\end{DoxyParagraph}
\par


Copyright (c) 2008, Atmel Corporation All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

3. The name of ATMEL may not be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY ATMEL \char`\"{}AS IS\char`\"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 

\subsection{Makro-\/Dokumentation}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-Baudrate\_\-Set@{USART\_\-Baudrate\_\-Set}}
\index{USART\_\-Baudrate\_\-Set@{USART\_\-Baudrate\_\-Set}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-Baudrate\_\-Set}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-Baudrate\_\-Set(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart, }
\item[{}]{\_\-bselValue, }
\item[{}]{\_\-bScaleFactor}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_aa3579b0bb442accdc655f578ba2b98a6}
{\bfseries Wert:}
\begin{DoxyCode}
(_usart)->BAUDCTRLA =(uint8_t)_bselValue;                                        
         \
        (_usart)->BAUDCTRLB =(_bScaleFactor << USART_BSCALE0_bp)|(_bselValue >> 8
      )
\end{DoxyCode}


Set USART baud rate. 

Sets the USART's baud rate register.

UBRR\_\-Value : Value written to UBRR ScaleFactor : Time Base Generator Scale Factor

Equation for calculation of BSEL value in asynchronous normal speed mode: If ScaleFactor $>$= 0 BSEL = ((I/O clock frequency)/(2$^\wedge$(ScaleFactor)$\ast$16$\ast$Baudrate))-\/1 If ScaleFactor $<$ 0 BSEL = (1/(2$^\wedge$(ScaleFactor)$\ast$16))$\ast$(((I/O clock frequency)/Baudrate)-\/1)

\begin{DoxyNote}{Zu beachten}
See XMEGA manual for equations for calculation of BSEL value in other modes.
\end{DoxyNote}

\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module. \item[{\em \_\-bselValue}]Value to write to BSEL part of Baud control register. Use uint16\_\-t type. \item[{\em \_\-bScaleFactor}]USART baud rate scale factor. Use uint8\_\-t type \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-DreInterruptLevel\_\-Set@{USART\_\-DreInterruptLevel\_\-Set}}
\index{USART\_\-DreInterruptLevel\_\-Set@{USART\_\-DreInterruptLevel\_\-Set}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-DreInterruptLevel\_\-Set}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-DreInterruptLevel\_\-Set(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart, }
\item[{}]{\_\-dreIntLevel}
\end{DoxyParamCaption}
)~(\_\-usart)-\/$>$CTRLA = ((\_\-usart)-\/$>$CTRLA \& $\sim$USART\_\-DREINTLVL\_\-gm) $|$ \_\-dreIntLevel}\label{usart__driver_8h_a9feab6c03a53a35274e3993b9db42453}


Set USART DRE interrupt level. 

Sets the interrupt level on Data Register interrupt.


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module. \item[{\em \_\-dreIntLevel}]Interrupt level of the DRE interrupt. Use USART\_\-DREINTLVL\_\-t type. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-Format\_\-Set@{USART\_\-Format\_\-Set}}
\index{USART\_\-Format\_\-Set@{USART\_\-Format\_\-Set}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-Format\_\-Set}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-Format\_\-Set(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart, }
\item[{}]{\_\-charSize, }
\item[{}]{\_\-parityMode, }
\item[{}]{\_\-twoStopBits}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_acb44ea0800b644f2b62ffdc98bb2a20d}
{\bfseries Wert:}
\begin{DoxyCode}
(_usart)->CTRLC = (uint8_t) _charSize | _parityMode |                      \
                          (_twoStopBits ? USART_SBMODE_bm : 0)
\end{DoxyCode}


Macro that sets the USART frame format. 

Sets the frame format, Frame Size, parity mode and number of stop bits.


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module \item[{\em \_\-charSize}]The character size. Use USART\_\-CHSIZE\_\-t type. \item[{\em \_\-parityMode}]The parity Mode. Use USART\_\-PMODE\_\-t type. \item[{\em \_\-twoStopBits}]Enable two stop bit mode. Use bool type. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-GetChar@{USART\_\-GetChar}}
\index{USART\_\-GetChar@{USART\_\-GetChar}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-GetChar}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-GetChar(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart}
\end{DoxyParamCaption}
)~((\_\-usart)-\/$>$DATA)}\label{usart__driver_8h_a07265567505916d3b9578b476222e5ae}


Get received data (5-\/8 bit character). 

This macro reads out the RX register. Use the macro USART\_\-RX\_\-Complete to check if anything is received.


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]The USART module.\end{DoxyParams}

\begin{DoxyRetVals}{Rückgabewerte}
\item[{\em Received}]data. \end{DoxyRetVals}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-IsRXComplete@{USART\_\-IsRXComplete}}
\index{USART\_\-IsRXComplete@{USART\_\-IsRXComplete}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-IsRXComplete}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-IsRXComplete(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart}
\end{DoxyParamCaption}
)~(((\_\-usart)-\/$>$STATUS \& USART\_\-RXCIF\_\-bm) != 0)}\label{usart__driver_8h_a248d1e978ccc59ab18b22576cf105caf}


Checks if the RX complete interrupt flag is set. 

Checks if the RX complete interrupt flag is set.


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]The USART module. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-IsTXDataRegisterEmpty@{USART\_\-IsTXDataRegisterEmpty}}
\index{USART\_\-IsTXDataRegisterEmpty@{USART\_\-IsTXDataRegisterEmpty}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-IsTXDataRegisterEmpty}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-IsTXDataRegisterEmpty(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart}
\end{DoxyParamCaption}
)~(((\_\-usart)-\/$>$STATUS \& USART\_\-DREIF\_\-bm) != 0)}\label{usart__driver_8h_a73f335fabf259c7dd976ba1821346a63}


Check if data register empty flag is set. 


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]The USART module. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-PutChar@{USART\_\-PutChar}}
\index{USART\_\-PutChar@{USART\_\-PutChar}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-PutChar}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-PutChar(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart, }
\item[{}]{\_\-data}
\end{DoxyParamCaption}
)~((\_\-usart)-\/$>$DATA = \_\-data)}\label{usart__driver_8h_a09861522526fb7156f91d80366237557}


Put data (5-\/8 bit character). 

Use the macro USART\_\-IsTXDataRegisterEmpty before using this function to put data to the TX register.


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]The USART module. \item[{\em \_\-data}]The data to send. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-RX\_\-BUFFER\_\-MASK@{USART\_\-RX\_\-BUFFER\_\-MASK}}
\index{USART\_\-RX\_\-BUFFER\_\-MASK@{USART\_\-RX\_\-BUFFER\_\-MASK}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-RX\_\-BUFFER\_\-MASK}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-RX\_\-BUFFER\_\-MASK~( USART\_\-RX\_\-BUFFER\_\-SIZE -\/ 1 )}\label{usart__driver_8h_a910e51ba6d0a14c09b1e64f42a13d709}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-RX\_\-BUFFER\_\-SIZE@{USART\_\-RX\_\-BUFFER\_\-SIZE}}
\index{USART\_\-RX\_\-BUFFER\_\-SIZE@{USART\_\-RX\_\-BUFFER\_\-SIZE}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-RX\_\-BUFFER\_\-SIZE}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-RX\_\-BUFFER\_\-SIZE~128}\label{usart__driver_8h_ac0999c0821d14cfab43e6f3c778c2b95}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-Rx\_\-Disable@{USART\_\-Rx\_\-Disable}}
\index{USART\_\-Rx\_\-Disable@{USART\_\-Rx\_\-Disable}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-Rx\_\-Disable}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-Rx\_\-Disable(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart}
\end{DoxyParamCaption}
)~((\_\-usart)-\/$>$CTRLB \&= $\sim$USART\_\-RXEN\_\-bm)}\label{usart__driver_8h_af128d0543a7ef2942896c11cb7a355ef}


Disable USART receiver. 


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-Rx\_\-Enable@{USART\_\-Rx\_\-Enable}}
\index{USART\_\-Rx\_\-Enable@{USART\_\-Rx\_\-Enable}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-Rx\_\-Enable}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-Rx\_\-Enable(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart}
\end{DoxyParamCaption}
)~((\_\-usart)-\/$>$CTRLB $|$= USART\_\-RXEN\_\-bm)}\label{usart__driver_8h_a00e17fdbc093dda5612b7f78f3cbd00a}


Enable USART receiver. 


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-RxdInterruptLevel\_\-Set@{USART\_\-RxdInterruptLevel\_\-Set}}
\index{USART\_\-RxdInterruptLevel\_\-Set@{USART\_\-RxdInterruptLevel\_\-Set}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-RxdInterruptLevel\_\-Set}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-RxdInterruptLevel\_\-Set(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart, }
\item[{}]{\_\-rxdIntLevel}
\end{DoxyParamCaption}
)~((\_\-usart)-\/$>$CTRLA = ((\_\-usart)-\/$>$CTRLA \& $\sim$USART\_\-RXCINTLVL\_\-gm) $|$ \_\-rxdIntLevel)}\label{usart__driver_8h_a7f0150e28b00e9b57b3725e03c8ae845}


Set USART RXD interrupt level. 

Sets the interrupt level on RX Complete interrupt.


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module. \item[{\em \_\-rxdIntLevel}]Interrupt level of the RXD interrupt. Use USART\_\-RXCINTLVL\_\-t type. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-SetMode@{USART\_\-SetMode}}
\index{USART\_\-SetMode@{USART\_\-SetMode}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-SetMode}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-SetMode(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart, }
\item[{}]{\_\-usartMode}
\end{DoxyParamCaption}
)~((\_\-usart)-\/$>$CTRLC = ((\_\-usart)-\/$>$CTRLC \& ($\sim$USART\_\-CMODE\_\-gm)) $|$ \_\-usartMode)}\label{usart__driver_8h_a0d2169dba1444c4abc4352868f9134e0}


Set the mode the USART run in. 

Set the mode the USART run in. The default mode is asynchronous mode.


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module register section. \item[{\em \_\-usartMode}]Selects the USART mode. Use USART\_\-CMODE\_\-t type.\end{DoxyParams}
USART modes:
\begin{DoxyItemize}
\item 0x0 : Asynchronous mode.
\item 0x1 : Synchronous mode.
\item 0x2 : IrDA mode.
\item 0x3 : Master SPI mode. 
\end{DoxyItemize}\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-TX\_\-BUFFER\_\-MASK@{USART\_\-TX\_\-BUFFER\_\-MASK}}
\index{USART\_\-TX\_\-BUFFER\_\-MASK@{USART\_\-TX\_\-BUFFER\_\-MASK}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-TX\_\-BUFFER\_\-MASK}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-TX\_\-BUFFER\_\-MASK~( USART\_\-TX\_\-BUFFER\_\-SIZE -\/ 1 )}\label{usart__driver_8h_a33e4c2dff471d7794193a77465f83a23}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-TX\_\-BUFFER\_\-SIZE@{USART\_\-TX\_\-BUFFER\_\-SIZE}}
\index{USART\_\-TX\_\-BUFFER\_\-SIZE@{USART\_\-TX\_\-BUFFER\_\-SIZE}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-TX\_\-BUFFER\_\-SIZE}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-TX\_\-BUFFER\_\-SIZE~128}\label{usart__driver_8h_a21d527450b438bba8dab02e03f021ee3}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-Tx\_\-Disable@{USART\_\-Tx\_\-Disable}}
\index{USART\_\-Tx\_\-Disable@{USART\_\-Tx\_\-Disable}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-Tx\_\-Disable}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-Tx\_\-Disable(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart}
\end{DoxyParamCaption}
)~((\_\-usart)-\/$>$CTRLB \&= $\sim$USART\_\-TXEN\_\-bm)}\label{usart__driver_8h_a8653dc89f054cffe36dab3717f05d793}


Disable USART transmitter. 


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-Tx\_\-Enable@{USART\_\-Tx\_\-Enable}}
\index{USART\_\-Tx\_\-Enable@{USART\_\-Tx\_\-Enable}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-Tx\_\-Enable}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-Tx\_\-Enable(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart}
\end{DoxyParamCaption}
)~((\_\-usart)-\/$>$CTRLB $|$= USART\_\-TXEN\_\-bm)}\label{usart__driver_8h_acc94677022e0a8113e12f494d6b47027}


Enable USART transmitter. 


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-TxdInterruptLevel\_\-Set@{USART\_\-TxdInterruptLevel\_\-Set}}
\index{USART\_\-TxdInterruptLevel\_\-Set@{USART\_\-TxdInterruptLevel\_\-Set}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-TxdInterruptLevel\_\-Set}]{\setlength{\rightskip}{0pt plus 5cm}\#define USART\_\-TxdInterruptLevel\_\-Set(
\begin{DoxyParamCaption}
\item[{}]{\_\-usart, }
\item[{}]{\_\-txdIntLevel}
\end{DoxyParamCaption}
)~(\_\-usart)-\/$>$CTRLA = ((\_\-usart)-\/$>$CTRLA \& $\sim$USART\_\-TXCINTLVL\_\-gm) $|$ \_\-txdIntLevel}\label{usart__driver_8h_aa3eac7b49352a7439830a3f3d58cf4f4}


Set USART TXD interrupt level. 

Sets the interrupt level on TX Complete interrupt.


\begin{DoxyParams}{Parameter}
\item[{\em \_\-usart}]Pointer to the USART module. \item[{\em \_\-txdIntLevel}]Interrupt level of the TXD interrupt. Use USART\_\-TXCINTLVL\_\-t type. \end{DoxyParams}


\subsection{Dokumentation der benutzerdefinierten Typen}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-Buffer\_\-t@{USART\_\-Buffer\_\-t}}
\index{USART\_\-Buffer\_\-t@{USART\_\-Buffer\_\-t}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-Buffer\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf USART\_\-Buffer}  {\bf USART\_\-Buffer\_\-t}}\label{usart__driver_8h_af27d135e807dcd1846b6f175997c5f45}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-data\_\-t@{USART\_\-data\_\-t}}
\index{USART\_\-data\_\-t@{USART\_\-data\_\-t}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-data\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf Usart\_\-and\_\-buffer}  {\bf USART\_\-data\_\-t}}\label{usart__driver_8h_a884c38d38327b0d4263c03cf0d84031e}


Struct used when interrupt driven driver is used. 

Struct containing pointer to a usart, a buffer and a location to store Data register interrupt level temporary. 

\subsection{Dokumentation der Funktionen}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-DataRegEmpty@{USART\_\-DataRegEmpty}}
\index{USART\_\-DataRegEmpty@{USART\_\-DataRegEmpty}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-DataRegEmpty}]{\setlength{\rightskip}{0pt plus 5cm}void USART\_\-DataRegEmpty (
\begin{DoxyParamCaption}
\item[{{\bf USART\_\-data\_\-t} $\ast$}]{ usart\_\-data}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_a7fdb922f6b858bef8515e23229efd970}


Data Register Empty Interrupt Service Routine. 

Data Register Empty Interrupt Service Routine. Transmits one byte from TX software buffer. Disables DRE interrupt if buffer is empty. Argument is pointer to USART (USART\_\-data\_\-t).


\begin{DoxyParams}{Parameter}
\item[{\em usart\_\-data}]The USART\_\-data\_\-t struct instance. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-InterruptDriver\_\-DreInterruptLevel\_\-Set@{USART\_\-InterruptDriver\_\-DreInterruptLevel\_\-Set}}
\index{USART\_\-InterruptDriver\_\-DreInterruptLevel\_\-Set@{USART\_\-InterruptDriver\_\-DreInterruptLevel\_\-Set}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-InterruptDriver\_\-DreInterruptLevel\_\-Set}]{\setlength{\rightskip}{0pt plus 5cm}void USART\_\-InterruptDriver\_\-DreInterruptLevel\_\-Set (
\begin{DoxyParamCaption}
\item[{{\bf USART\_\-data\_\-t} $\ast$}]{ usart\_\-data, }
\item[{USART\_\-DREINTLVL\_\-t}]{ dreIntLevel}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_a5df0d3f812fd03444a7f2748f761a401}


Set USART DRE interrupt level. 

Set the interrupt level on Data Register interrupt.

\begin{DoxyNote}{Zu beachten}
Changing the DRE interrupt level in the interrupt driver while it is running will not change the DRE interrupt level in the USART before the DRE interrupt have been disabled and enabled again.
\end{DoxyNote}

\begin{DoxyParams}{Parameter}
\item[{\em usart\_\-data}]The USART\_\-data\_\-t struct instance \item[{\em dreIntLevel}]Interrupt level of the DRE interrupt. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-InterruptDriver\_\-Initialize@{USART\_\-InterruptDriver\_\-Initialize}}
\index{USART\_\-InterruptDriver\_\-Initialize@{USART\_\-InterruptDriver\_\-Initialize}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-InterruptDriver\_\-Initialize}]{\setlength{\rightskip}{0pt plus 5cm}void USART\_\-InterruptDriver\_\-Initialize (
\begin{DoxyParamCaption}
\item[{{\bf USART\_\-data\_\-t} $\ast$}]{ usart\_\-data, }
\item[{USART\_\-t $\ast$}]{ usart, }
\item[{USART\_\-DREINTLVL\_\-t}]{ dreIntLevel}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_a73739bc5a8060fa175df2dd43bb6174a}


Initializes buffer and selects what USART module to use. 

Initializes receive and transmit buffer and selects what USART module to use, and stores the data register empty interrupt level.


\begin{DoxyParams}{Parameter}
\item[{\em usart\_\-data}]The USART\_\-data\_\-t struct instance. \item[{\em usart}]The USART module. \item[{\em dreIntLevel}]Data register empty interrupt level. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-NineBits\_\-GetChar@{USART\_\-NineBits\_\-GetChar}}
\index{USART\_\-NineBits\_\-GetChar@{USART\_\-NineBits\_\-GetChar}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-NineBits\_\-GetChar}]{\setlength{\rightskip}{0pt plus 5cm}uint16\_\-t USART\_\-NineBits\_\-GetChar (
\begin{DoxyParamCaption}
\item[{USART\_\-t $\ast$}]{ usart}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_ad98fa51459c8fc8a1d554cd0a8d81cd4}


Get received data (9 bit character). 

This function reads out the received 9 bit character (uint16\_\-t). Use the function USART\_\-IsRXComplete to check if anything is received.


\begin{DoxyParams}{Parameter}
\item[{\em usart}]The USART module.\end{DoxyParams}

\begin{DoxyRetVals}{Rückgabewerte}
\item[{\em Received}]data. \end{DoxyRetVals}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-NineBits\_\-PutChar@{USART\_\-NineBits\_\-PutChar}}
\index{USART\_\-NineBits\_\-PutChar@{USART\_\-NineBits\_\-PutChar}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-NineBits\_\-PutChar}]{\setlength{\rightskip}{0pt plus 5cm}void USART\_\-NineBits\_\-PutChar (
\begin{DoxyParamCaption}
\item[{USART\_\-t $\ast$}]{ usart, }
\item[{uint16\_\-t}]{ data}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_abcbf436801dae8ea99e55d1dd58c311f}


Put data (9 bit character). 

Use the function USART\_\-IsTXDataRegisterEmpty before using this function to put 9 bit character to the TX register.


\begin{DoxyParams}{Parameter}
\item[{\em usart}]The USART module. \item[{\em data}]The data to send. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-RXBuffer\_\-checkPointerDiff@{USART\_\-RXBuffer\_\-checkPointerDiff}}
\index{USART\_\-RXBuffer\_\-checkPointerDiff@{USART\_\-RXBuffer\_\-checkPointerDiff}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-RXBuffer\_\-checkPointerDiff}]{\setlength{\rightskip}{0pt plus 5cm}{\bf DT\_\-bool} USART\_\-RXBuffer\_\-checkPointerDiff (
\begin{DoxyParamCaption}
\item[{{\bf DT\_\-byte}}]{ tail, }
\item[{{\bf DT\_\-byte}}]{ head, }
\item[{{\bf DT\_\-byte}}]{ diff}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_acb46b606bd89f077fea89f13b22398fc}


Überprüft Differenzen der Empfangs-\/Pointer. 


\begin{DoxyParams}{Parameter}
\item[{\em tail}]Tail-\/Pointer \item[{\em head}]Head-\/Pointer \item[{\em diff}]Differenz\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
Bool 
\end{DoxyReturn}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-RXBuffer\_\-GetByte@{USART\_\-RXBuffer\_\-GetByte}}
\index{USART\_\-RXBuffer\_\-GetByte@{USART\_\-RXBuffer\_\-GetByte}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-RXBuffer\_\-GetByte}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t USART\_\-RXBuffer\_\-GetByte (
\begin{DoxyParamCaption}
\item[{{\bf USART\_\-data\_\-t} $\ast$}]{ usart\_\-data}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_a36cca099e37ec451e52efebe4c60180e}


Get received data (5-\/8 bit character). 

The function USART\_\-RXBufferData\_\-Available should be used before this function is used to ensure that data is available.

Returns data from RX software buffer.


\begin{DoxyParams}{Parameter}
\item[{\em usart\_\-data}]The USART\_\-data\_\-t struct instance.\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
Received data. 
\end{DoxyReturn}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-RXBufferData\_\-Available@{USART\_\-RXBufferData\_\-Available}}
\index{USART\_\-RXBufferData\_\-Available@{USART\_\-RXBufferData\_\-Available}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-RXBufferData\_\-Available}]{\setlength{\rightskip}{0pt plus 5cm}bool USART\_\-RXBufferData\_\-Available (
\begin{DoxyParamCaption}
\item[{{\bf USART\_\-data\_\-t} $\ast$}]{ usart\_\-data}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_ac65d5461255def6cd49b05a88d5aa411}


Test if there is data in the receive software buffer. 

This function can be used to test if there is data in the receive software buffer.


\begin{DoxyParams}{Parameter}
\item[{\em usart\_\-data}]The USART\_\-data\_\-t struct instance\end{DoxyParams}

\begin{DoxyRetVals}{Rückgabewerte}
\item[{\em true}]There is data in the receive buffer. \item[{\em false}]The receive buffer is empty. \end{DoxyRetVals}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-RXComplete@{USART\_\-RXComplete}}
\index{USART\_\-RXComplete@{USART\_\-RXComplete}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-RXComplete}]{\setlength{\rightskip}{0pt plus 5cm}bool USART\_\-RXComplete (
\begin{DoxyParamCaption}
\item[{{\bf USART\_\-data\_\-t} $\ast$}]{ usart\_\-data}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_a6c2c49f32a74cb6a84b16d8647d3e9b6}


RX Complete Interrupt Service Routine. 

RX Complete Interrupt Service Routine. Stores received data in RX software buffer.


\begin{DoxyParams}{Parameter}
\item[{\em usart\_\-data}]The USART\_\-data\_\-t struct instance. \end{DoxyParams}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-TXBuffer\_\-FreeSpace@{USART\_\-TXBuffer\_\-FreeSpace}}
\index{USART\_\-TXBuffer\_\-FreeSpace@{USART\_\-TXBuffer\_\-FreeSpace}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-TXBuffer\_\-FreeSpace}]{\setlength{\rightskip}{0pt plus 5cm}bool USART\_\-TXBuffer\_\-FreeSpace (
\begin{DoxyParamCaption}
\item[{{\bf USART\_\-data\_\-t} $\ast$}]{ usart\_\-data}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_aecbd49900666abf476cf5cce10fb372a}


Test if there is data in the transmitter software buffer. 

This function can be used to test if there is free space in the transmitter software buffer.


\begin{DoxyParams}{Parameter}
\item[{\em usart\_\-data}]The USART\_\-data\_\-t struct instance.\end{DoxyParams}

\begin{DoxyRetVals}{Rückgabewerte}
\item[{\em true}]There is data in the receive buffer. \item[{\em false}]The receive buffer is empty. \end{DoxyRetVals}
\index{usart\_\-driver.h@{usart\_\-driver.h}!USART\_\-TXBuffer\_\-PutByte@{USART\_\-TXBuffer\_\-PutByte}}
\index{USART\_\-TXBuffer\_\-PutByte@{USART\_\-TXBuffer\_\-PutByte}!usart_driver.h@{usart\_\-driver.h}}
\subsubsection[{USART\_\-TXBuffer\_\-PutByte}]{\setlength{\rightskip}{0pt plus 5cm}bool USART\_\-TXBuffer\_\-PutByte (
\begin{DoxyParamCaption}
\item[{{\bf USART\_\-data\_\-t} $\ast$}]{ usart\_\-data, }
\item[{uint8\_\-t}]{ data}
\end{DoxyParamCaption}
)}\label{usart__driver_8h_ac6a0c12350c501c1b8189aca778f5129}


Put data (5-\/8 bit character). 

Stores data byte in TX software buffer and enables DRE interrupt if there is free space in the TX software buffer.


\begin{DoxyParams}{Parameter}
\item[{\em usart\_\-data}]The USART\_\-data\_\-t struct instance. \item[{\em data}]The data to send. \end{DoxyParams}
